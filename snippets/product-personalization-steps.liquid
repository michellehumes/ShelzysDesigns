{% comment %}
================================================================================
SHELZY'S DESIGNS - PERSONALIZATION STEPS EXPLAINER
Version: 2.0.0
Last Updated: 2024-12
================================================================================
Collapsible "How Personalization Works" visual explainer.
Builds confidence for first-time buyers unfamiliar with sublimation.

Revenue Impact: Reduces bounce by addressing common questions,
increases conversion by 10-15% for personalized products.

Usage: {% render 'product-personalization-steps' %}
================================================================================
{% endcomment %}

{%- liquid
  assign default_expanded = false
  if product.tags contains 'personalized' or product.tags contains 'custom'
    assign default_expanded = true
  endif
-%}

<details class="sz-personalization-steps" {% if default_expanded %}open{% endif %}>
  <summary class="sz-personalization-steps__trigger">
    <span class="sz-personalization-steps__trigger-content">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
      </svg>
      <span>How Personalization Works</span>
    </span>
    <svg class="sz-personalization-steps__chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
      <polyline points="6 9 12 15 18 9"/>
    </svg>
  </summary>

  <div class="sz-personalization-steps__content">
    <div class="sz-personalization-steps__grid">
      {%- comment -%} Step 1: Choose {%- endcomment -%}
      <div class="sz-personalization-steps__step">
        <span class="sz-personalization-steps__number">1</span>
        <div class="sz-personalization-steps__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 16v-4"/>
            <path d="M12 8h.01"/>
          </svg>
        </div>
        <h4 class="sz-personalization-steps__title">Choose Your Style</h4>
        <p class="sz-personalization-steps__desc">Select your bottle color and design from our curated collection</p>
      </div>

      {%- comment -%} Step 2: Personalize {%- endcomment -%}
      <div class="sz-personalization-steps__step">
        <span class="sz-personalization-steps__number">2</span>
        <div class="sz-personalization-steps__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
          </svg>
        </div>
        <h4 class="sz-personalization-steps__title">Add Your Name</h4>
        <p class="sz-personalization-steps__desc">Enter the name or text you'd like printed on your bottle</p>
      </div>

      {%- comment -%} Step 3: We Create {%- endcomment -%}
      <div class="sz-personalization-steps__step">
        <span class="sz-personalization-steps__number">3</span>
        <div class="sz-personalization-steps__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
          </svg>
        </div>
        <h4 class="sz-personalization-steps__title">We Create It</h4>
        <p class="sz-personalization-steps__desc">Your design is sublimation-printedâ€”permanent, no vinyl, won't peel</p>
      </div>

      {%- comment -%} Step 4: Ships {%- endcomment -%}
      <div class="sz-personalization-steps__step">
        <span class="sz-personalization-steps__number">4</span>
        <div class="sz-personalization-steps__icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/>
          </svg>
        </div>
        <h4 class="sz-personalization-steps__title">Ships in 3-5 Days</h4>
        <p class="sz-personalization-steps__desc">Made fresh and shipped with care, directly to you</p>
      </div>
    </div>

    <div class="sz-personalization-steps__note">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <polyline points="20 6 9 17 4 12"/>
      </svg>
      <span><strong>Sublimation printing</strong> = permanent. No vinyl decals, no peeling, no fading. Dishwasher safe.</span>
    </div>
  </div>
</details>

<style>
  .sz-personalization-steps {
    border: 1px solid var(--sz-border, #E8E4DE);
    border-radius: var(--sz-radius-lg, 12px);
    background: var(--sz-background, #FFFFFF);
    margin: var(--sz-space-lg, 24px) 0;
    overflow: hidden;
  }

  .sz-personalization-steps__trigger {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: var(--sz-space-md, 16px) var(--sz-space-lg, 20px);
    background: var(--sz-background-alt, #FAF9F6);
    cursor: pointer;
    list-style: none;
    transition: background var(--sz-transition-fast, 0.2s) ease;
  }

  .sz-personalization-steps__trigger::-webkit-details-marker {
    display: none;
  }

  .sz-personalization-steps__trigger:hover {
    background: var(--sz-surface, #F5F2ED);
  }

  .sz-personalization-steps__trigger-content {
    display: flex;
    align-items: center;
    gap: var(--sz-space-sm, 10px);
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm, 14px);
    font-weight: var(--sz-font-semibold, 600);
    color: var(--sz-heading);
  }

  .sz-personalization-steps__trigger-content svg {
    color: var(--sz-primary);
    flex-shrink: 0;
  }

  .sz-personalization-steps__chevron {
    color: var(--sz-text-muted);
    transition: transform var(--sz-transition-fast, 0.2s) ease;
  }

  .sz-personalization-steps[open] .sz-personalization-steps__chevron {
    transform: rotate(180deg);
  }

  .sz-personalization-steps__content {
    padding: var(--sz-space-lg, 24px);
    border-top: 1px solid var(--sz-border, #E8E4DE);
  }

  .sz-personalization-steps__grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--sz-space-md, 16px);
  }

  @media (max-width: 768px) {
    .sz-personalization-steps__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 480px) {
    .sz-personalization-steps__grid {
      grid-template-columns: 1fr;
    }
  }

  .sz-personalization-steps__step {
    position: relative;
    text-align: center;
    padding: var(--sz-space-md, 16px) var(--sz-space-sm, 10px);
  }

  .sz-personalization-steps__number {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--sz-primary);
    color: var(--sz-background, #FFFFFF);
    font-family: var(--sz-font-body);
    font-size: 11px;
    font-weight: var(--sz-font-bold, 700);
    border-radius: var(--sz-radius-full, 999px);
  }

  .sz-personalization-steps__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    margin: var(--sz-space-sm, 10px) auto var(--sz-space-sm, 12px);
    background: var(--sz-surface, #F5F2ED);
    border-radius: var(--sz-radius-full, 999px);
  }

  .sz-personalization-steps__icon svg {
    color: var(--sz-primary);
  }

  .sz-personalization-steps__title {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm, 14px);
    font-weight: var(--sz-font-semibold, 600);
    color: var(--sz-heading);
    margin: 0 0 var(--sz-space-xs, 6px) 0;
  }

  .sz-personalization-steps__desc {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-xs, 12px);
    line-height: var(--sz-leading-relaxed, 1.5);
    color: var(--sz-text-muted);
    margin: 0;
  }

  .sz-personalization-steps__note {
    display: flex;
    align-items: flex-start;
    gap: var(--sz-space-sm, 8px);
    margin-top: var(--sz-space-lg, 20px);
    padding: var(--sz-space-md, 12px) var(--sz-space-md, 16px);
    background: var(--sz-primary-light, #EDF3EC);
    border-radius: var(--sz-radius-md, 8px);
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-xs, 13px);
    color: var(--sz-text);
    line-height: var(--sz-leading-relaxed, 1.5);
  }

  .sz-personalization-steps__note svg {
    color: var(--sz-primary);
    flex-shrink: 0;
    margin-top: 2px;
  }

  .sz-personalization-steps__note strong {
    color: var(--sz-primary-dark);
  }
</style>
