{% comment %}
================================================================================
SHELZY'S DESIGNS - COLLECTION INTRO
Version: 2.0.0
Last Updated: 2024-12
================================================================================
Optional collection intro block with metafield-driven content.
Shows promotional messaging, buying confidence, or use-case framing.

Expected Metafields (namespace: custom):
- custom.intro_heading (text)
- custom.intro_text (rich_text)
- custom.highlight_text (text) - e.g. "Free personalization on all bottles"
- custom.badge_text (text) - e.g. "Most Popular"

Revenue Impact: Contextual messaging increases time on page
and reduces bounce by 10-15%.

Usage: {% render 'collection-intro', collection: collection %}
================================================================================
{% endcomment %}

{%- liquid
  assign has_intro_heading = false
  assign has_intro_text = false
  assign has_highlight = false
  assign has_badge = false

  if collection.metafields.custom.intro_heading != blank
    assign has_intro_heading = true
    assign intro_heading = collection.metafields.custom.intro_heading.value
  endif

  if collection.metafields.custom.intro_text != blank
    assign has_intro_text = true
    assign intro_text = collection.metafields.custom.intro_text.value
  endif

  if collection.metafields.custom.highlight_text != blank
    assign has_highlight = true
    assign highlight_text = collection.metafields.custom.highlight_text.value
  endif

  if collection.metafields.custom.badge_text != blank
    assign has_badge = true
    assign badge_text = collection.metafields.custom.badge_text.value
  endif

  assign has_any_content = has_intro_heading or has_intro_text or has_highlight
-%}

{%- if has_any_content -%}
  <div class="sz-collection-intro">
    {%- if has_badge -%}
      <span class="sz-collection-intro__badge">{{ badge_text }}</span>
    {%- endif -%}

    {%- if has_intro_heading -%}
      <h2 class="sz-collection-intro__heading">{{ intro_heading }}</h2>
    {%- endif -%}

    {%- if has_intro_text -%}
      <div class="sz-collection-intro__text rte">{{ intro_text }}</div>
    {%- endif -%}

    {%- if has_highlight -%}
      <div class="sz-collection-intro__highlight">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="20 6 9 17 4 12"/>
        </svg>
        <span>{{ highlight_text }}</span>
      </div>
    {%- endif -%}
  </div>
{%- endif -%}

{%- comment -%} Default confidence messaging if no metafields {%- endcomment -%}
{%- unless has_any_content -%}
  {%- if show_default_confidence -%}
    <div class="sz-collection-intro sz-collection-intro--default">
      <div class="sz-collection-intro__highlight">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
        </svg>
        <span>Free personalization on all bottles</span>
      </div>
    </div>
  {%- endif -%}
{%- endunless -%}

<style>
  .sz-collection-intro {
    background: var(--sz-surface, #F5F2ED);
    border-radius: var(--sz-radius-lg, 12px);
    padding: var(--sz-space-lg, 24px);
    margin-bottom: var(--sz-space-xl, 32px);
    text-align: center;
  }

  .sz-collection-intro--default {
    background: var(--sz-background-alt, #FAF9F6);
    padding: var(--sz-space-md, 16px) var(--sz-space-lg, 24px);
  }

  .sz-collection-intro__badge {
    display: inline-block;
    font-family: var(--sz-font-body);
    font-size: 11px;
    font-weight: var(--sz-font-semibold, 600);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    padding: var(--sz-space-xs, 6px) var(--sz-space-sm, 12px);
    background: var(--sz-accent, #D4AF37);
    color: var(--sz-heading, #1F1F1F);
    border-radius: var(--sz-radius-full, 999px);
    margin-bottom: var(--sz-space-md, 16px);
  }

  .sz-collection-intro__heading {
    font-family: var(--sz-font-heading);
    font-size: var(--sz-text-2xl, 24px);
    font-weight: var(--sz-font-heading-weight, 500);
    color: var(--sz-heading);
    margin: 0 0 var(--sz-space-sm, 12px) 0;
  }

  .sz-collection-intro__text {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-base, 16px);
    line-height: var(--sz-leading-relaxed, 1.6);
    color: var(--sz-text);
    max-width: 600px;
    margin: 0 auto var(--sz-space-md, 16px) auto;
  }

  .sz-collection-intro__text p {
    margin: 0;
  }

  .sz-collection-intro__highlight {
    display: inline-flex;
    align-items: center;
    gap: var(--sz-space-sm, 8px);
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm, 14px);
    font-weight: var(--sz-font-medium, 500);
    color: var(--sz-primary-dark);
  }

  .sz-collection-intro__highlight svg {
    color: var(--sz-primary);
    flex-shrink: 0;
  }

  @media (max-width: 768px) {
    .sz-collection-intro {
      padding: var(--sz-space-md, 16px);
    }

    .sz-collection-intro__heading {
      font-size: var(--sz-text-xl, 20px);
    }
  }
</style>
