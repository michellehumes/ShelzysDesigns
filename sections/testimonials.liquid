{%- comment -%}
  Shelzy's Designs - Testimonials Section
  Customer reviews and social proof
{%- endcomment -%}

<section class="sz-testimonials" style="background: {{ section.settings.background_color }};">
  <div class="sz-testimonials-inner">

    {%- if section.settings.heading != blank or section.settings.subheading != blank -%}
      <div class="sz-testimonials-header">
        {%- if section.settings.subheading != blank -%}
          <p class="sz-testimonials-subheading" style="color: {{ section.settings.accent_color }};">{{ section.settings.subheading }}</p>
        {%- endif -%}
        {%- if section.settings.heading != blank -%}
          <h2 class="sz-testimonials-heading" style="color: {{ section.settings.text_color }};">{{ section.settings.heading }}</h2>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="sz-testimonials-grid sz-testimonials-{{ section.settings.layout }}">
      {%- for block in section.blocks -%}
        <div class="sz-testimonial-card" {{ block.shopify_attributes }} style="background: {{ section.settings.card_background }};">

          <div class="sz-testimonial-rating">
            {%- for i in (1..5) -%}
              {%- if i <= block.settings.rating -%}
                <svg width="18" height="18" viewBox="0 0 24 24" fill="{{ section.settings.star_color }}"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              {%- else -%}
                <svg width="18" height="18" viewBox="0 0 24 24" fill="#E0E0E0"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              {%- endif -%}
            {%- endfor -%}
          </div>

          {%- if block.settings.title != blank -%}
            <h3 class="sz-testimonial-title" style="color: {{ section.settings.text_color }};">{{ block.settings.title }}</h3>
          {%- endif -%}

          <blockquote class="sz-testimonial-quote" style="color: {{ section.settings.text_color }};">
            {{ block.settings.quote }}
          </blockquote>

          <div class="sz-testimonial-author">
            {%- if block.settings.author_image != blank -%}
              <img
                src="{{ block.settings.author_image | image_url: width: 80 }}"
                alt="{{ block.settings.author_name }}"
                class="sz-testimonial-avatar"
                loading="lazy"
              >
            {%- else -%}
              <div class="sz-testimonial-avatar sz-testimonial-avatar--initials" style="background: {{ section.settings.accent_color }};">
                {{ block.settings.author_name | slice: 0 }}
              </div>
            {%- endif -%}
            <div class="sz-testimonial-author-info">
              <p class="sz-testimonial-name" style="color: {{ section.settings.text_color }};">{{ block.settings.author_name }}</p>
              {%- if block.settings.author_title != blank -%}
                <p class="sz-testimonial-author-title">{{ block.settings.author_title }}</p>
              {%- endif -%}
            </div>
          </div>

          {%- if block.settings.product != blank -%}
            <a href="{{ block.settings.product.url }}" class="sz-testimonial-product">
              {%- if block.settings.product.featured_image != blank -%}
                <img
                  src="{{ block.settings.product.featured_image | image_url: width: 60 }}"
                  alt="{{ block.settings.product.title }}"
                  loading="lazy"
                >
              {%- endif -%}
              <span>{{ block.settings.product.title }}</span>
            </a>
          {%- endif -%}

        </div>
      {%- endfor -%}
    </div>

  </div>
</section>

{% style %}
  .sz-testimonials {
    padding: {{ section.settings.padding_top }}px 24px {{ section.settings.padding_bottom }}px;
  }

  .sz-testimonials-inner {
    max-width: 1400px;
    margin: 0 auto;
  }

  .sz-testimonials-header {
    text-align: center;
    margin-bottom: 48px;
  }

  .sz-testimonials-subheading {
    font-family: "Inter", sans-serif;
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin: 0 0 12px 0;
  }

  .sz-testimonials-heading {
    font-family: "Montserrat", sans-serif;
    font-size: clamp(28px, 4vw, 42px);
    font-weight: 500;
    margin: 0;
  }

  .sz-testimonials-grid {
    display: grid;
    gap: 24px;
  }

  .sz-testimonials-grid-3 { grid-template-columns: repeat(3, 1fr); }
  .sz-testimonials-grid-2 { grid-template-columns: repeat(2, 1fr); }
  .sz-testimonials-carousel { grid-template-columns: repeat(3, 1fr); }

  @media (max-width: 1024px) {
    .sz-testimonials-grid-3 { grid-template-columns: repeat(2, 1fr); }
  }

  @media (max-width: 768px) {
    .sz-testimonials-grid-3,
    .sz-testimonials-grid-2 {
      grid-template-columns: 1fr;
    }
  }

  .sz-testimonial-card {
    padding: 32px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .sz-testimonial-rating {
    display: flex;
    gap: 2px;
  }

  .sz-testimonial-title {
    font-family: "Inter", sans-serif;
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    line-height: 1.4;
  }

  .sz-testimonial-quote {
    font-family: "Inter", sans-serif;
    font-size: 15px;
    line-height: 1.7;
    margin: 0;
    flex-grow: 1;
    opacity: 0.9;
  }

  .sz-testimonial-author {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 8px;
  }

  .sz-testimonial-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    object-fit: cover;
  }

  .sz-testimonial-avatar--initials {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #FFFFFF;
    font-family: "Inter", sans-serif;
    font-size: 16px;
    font-weight: 600;
  }

  .sz-testimonial-author-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .sz-testimonial-name {
    font-family: "Inter", sans-serif;
    font-size: 14px;
    font-weight: 600;
    margin: 0;
  }

  .sz-testimonial-author-title {
    font-family: "Inter", sans-serif;
    font-size: 13px;
    color: #7A7A7A;
    margin: 0;
  }

  .sz-testimonial-product {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: rgba(0, 0, 0, 0.03);
    border-radius: 4px;
    text-decoration: none;
    margin-top: 8px;
    transition: background 0.2s ease;
  }

  .sz-testimonial-product:hover {
    background: rgba(0, 0, 0, 0.06);
  }

  .sz-testimonial-product img {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 4px;
  }

  .sz-testimonial-product span {
    font-family: "Inter", sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: {{ section.settings.text_color }};
  }
{% endstyle %}

{% schema %}
{
  "name": "Testimonials",
  "tag": "section",
  "class": "sz-testimonials-section",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Customer Love"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "What Our Customers Say"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "grid-2", "label": "2 columns" },
        { "value": "grid-3", "label": "3 columns" }
      ],
      "default": "grid-3"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#F5F2ED"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#1F1F1F"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#fb5887"
    },
    {
      "type": "color",
      "id": "star_color",
      "label": "Star color",
      "default": "#D4AF37"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 120,
      "step": 8,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 120,
      "step": 8,
      "default": 80,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "text",
          "id": "title",
          "label": "Review title",
          "default": "Absolutely Perfect!"
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "These bottles were a huge hit at our wedding! The quality is amazing and the personalization was exactly what we wanted. Highly recommend!"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Author image"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "author_title",
          "label": "Author title (optional)",
          "default": "Verified Buyer"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Link to product (optional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "title": "Perfect for My Wedding!",
            "quote": "These bottles were a huge hit at our wedding! The quality is amazing and the personalization was exactly what we wanted. All my bridesmaids loved them!",
            "author_name": "Sarah M.",
            "author_title": "Verified Buyer"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "title": "Amazing Quality",
            "quote": "I've ordered from other shops before, but the sublimation printing on these is next level. No peeling, no fading â€” they look brand new even after months of use.",
            "author_name": "Jessica T.",
            "author_title": "Verified Buyer"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "title": "Great for Gifts",
            "quote": "Ordered these for my daughter's dance team and they were a hit! Great communication, fast shipping, and the bottles are beautiful. Will definitely order again.",
            "author_name": "Michelle R.",
            "author_title": "Verified Buyer"
          }
        }
      ]
    }
  ]
}
{% endschema %}
