{%- comment -%}
  Shelzy's Designs - Reviews Carousel

  Compact review carousel showing:
  - 4.9★ rating badge
  - 500+ reviews count
  - 3-6 highlight review quotes in carousel

  Add to homepage after Best Sellers: {% render 'shelzys-reviews-carousel' %}
{%- endcomment -%}

<section class="sz-reviews-carousel">
  <div class="sz-reviews-container">

    {%- comment -%} Rating Badge {%- endcomment -%}
    <div class="sz-reviews-badge">
      <div class="sz-reviews-rating">
        <span class="sz-rating-stars">★★★★★</span>
        <span class="sz-rating-score">4.9</span>
      </div>
      <p class="sz-reviews-count">Based on 500+ verified reviews</p>
    </div>

    {%- comment -%} Carousel {%- endcomment -%}
    <div class="sz-reviews-slider" id="szReviewsSlider">
      <div class="sz-reviews-track" id="szReviewsTrack">

        <div class="sz-review-card sz-active">
          <div class="sz-review-stars">★★★★★</div>
          <blockquote class="sz-review-quote">
            "These bottles were the highlight of my bridesmaid proposal boxes! The quality is incredible and my girls were so impressed."
          </blockquote>
          <div class="sz-review-author">
            <strong>Sarah M.</strong>
            <span>Wedding • Verified Buyer</span>
          </div>
        </div>

        <div class="sz-review-card">
          <div class="sz-review-stars">★★★★★</div>
          <blockquote class="sz-review-quote">
            "Ordered 30 bottles for our corporate retreat. Fast shipping, beautiful print quality, and our team loved them!"
          </blockquote>
          <div class="sz-review-author">
            <strong>Jennifer L.</strong>
            <span>Corporate Event • Verified Buyer</span>
          </div>
        </div>

        <div class="sz-review-card">
          <div class="sz-review-stars">★★★★★</div>
          <blockquote class="sz-review-quote">
            "I've washed mine 100+ times and it still looks brand new. No peeling like my old vinyl bottles. Worth every penny!"
          </blockquote>
          <div class="sz-review-author">
            <strong>Rachel T.</strong>
            <span>Repeat Customer • Verified Buyer</span>
          </div>
        </div>

        <div class="sz-review-card">
          <div class="sz-review-stars">★★★★★</div>
          <blockquote class="sz-review-quote">
            "My daughter's dance team was thrilled! The personalization was perfect and they arrived ahead of schedule."
          </blockquote>
          <div class="sz-review-author">
            <strong>Amanda K.</strong>
            <span>Dance Team Mom • Verified Buyer</span>
          </div>
        </div>

        <div class="sz-review-card">
          <div class="sz-review-stars">★★★★★</div>
          <blockquote class="sz-review-quote">
            "Best party favors I've ever ordered. Guests kept asking where I got them. Already planning my next order!"
          </blockquote>
          <div class="sz-review-author">
            <strong>Michelle D.</strong>
            <span>Birthday Party • Verified Buyer</span>
          </div>
        </div>

        <div class="sz-review-card">
          <div class="sz-review-stars">★★★★★</div>
          <blockquote class="sz-review-quote">
            "The sublimation printing is SO much better than vinyl. These bottles feel premium and look amazing!"
          </blockquote>
          <div class="sz-review-author">
            <strong>Katie R.</strong>
            <span>Bachelorette Party • Verified Buyer</span>
          </div>
        </div>

      </div>

      {%- comment -%} Navigation {%- endcomment -%}
      <div class="sz-reviews-nav">
        <button class="sz-reviews-prev" aria-label="Previous review">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
        </button>
        <div class="sz-reviews-dots" id="szReviewsDots"></div>
        <button class="sz-reviews-next" aria-label="Next review">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </button>
      </div>
    </div>

  </div>
</section>

<style>
  .sz-reviews-carousel {
    padding: 80px 20px;
    background: #FFFFFF;
  }

  @media (max-width: 768px) {
    .sz-reviews-carousel {
      padding: 60px 16px;
    }
  }

  .sz-reviews-container {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
  }

  /* ─── Rating Badge ─── */
  .sz-reviews-badge {
    margin-bottom: 48px;
  }

  .sz-reviews-rating {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 8px;
  }

  .sz-rating-stars {
    font-size: 24px;
    color: #B5A48A;
    letter-spacing: 4px;
  }

  .sz-rating-score {
    font-family: "Montserrat", sans-serif;
    font-size: 48px;
    font-weight: 500;
    color: #1F1F1F;
  }

  .sz-reviews-count {
    font-family: "Inter", sans-serif;
    font-size: 14px;
    color: #7A7A7A;
    margin: 0;
  }

  /* ─── Review Cards ─── */
  .sz-reviews-slider {
    position: relative;
  }

  .sz-reviews-track {
    position: relative;
    min-height: 200px;
  }

  .sz-review-card {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.4s ease;
    padding: 40px;
    background: #FAF8F5;
    border: 1px solid #E8E4DE;
  }

  .sz-review-card.sz-active {
    position: relative;
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  @media (max-width: 600px) {
    .sz-review-card {
      padding: 32px 24px;
    }
  }

  .sz-review-stars {
    font-size: 16px;
    letter-spacing: 3px;
    color: #B5A48A;
    margin-bottom: 20px;
  }

  .sz-review-quote {
    font-family: "Montserrat", sans-serif;
    font-size: 22px;
    font-weight: 400;
    font-style: italic;
    line-height: 1.6;
    color: #1F1F1F;
    margin: 0 0 24px 0;
  }

  @media (max-width: 600px) {
    .sz-review-quote {
      font-size: 18px;
    }
  }

  .sz-review-author {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .sz-review-author strong {
    font-family: "Inter", sans-serif;
    font-size: 15px;
    font-weight: 600;
    color: #1F1F1F;
  }

  .sz-review-author span {
    font-family: "Inter", sans-serif;
    font-size: 13px;
    color: #7A7A7A;
  }

  /* ─── Navigation ─── */
  .sz-reviews-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-top: 32px;
  }

  .sz-reviews-prev,
  .sz-reviews-next {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #FFFFFF;
    border: 1px solid #E8E4DE;
    border-radius: 50%;
    cursor: pointer;
    color: #4A4A4A;
    transition: all 0.2s ease;
  }

  .sz-reviews-prev:hover,
  .sz-reviews-next:hover {
    background: #1F1F1F;
    border-color: #1F1F1F;
    color: #FFFFFF;
  }

  .sz-reviews-dots {
    display: flex;
    gap: 8px;
  }

  .sz-reviews-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #D4CFC6;
    border: none;
    cursor: pointer;
    padding: 0;
    transition: all 0.2s ease;
  }

  .sz-reviews-dot.sz-active {
    background: #2C3E2D;
    width: 24px;
    border-radius: 4px;
  }
</style>

<script>
(function() {
  var cards = document.querySelectorAll('.sz-review-card');
  var dotsContainer = document.getElementById('szReviewsDots');
  var prevBtn = document.querySelector('.sz-reviews-prev');
  var nextBtn = document.querySelector('.sz-reviews-next');
  var currentIndex = 0;
  var autoplayInterval;

  if (!cards.length) return;

  // Create dots
  cards.forEach(function(_, i) {
    var dot = document.createElement('button');
    dot.className = 'sz-reviews-dot' + (i === 0 ? ' sz-active' : '');
    dot.setAttribute('aria-label', 'Go to review ' + (i + 1));
    dot.onclick = function() { goToSlide(i); };
    dotsContainer.appendChild(dot);
  });

  var dots = document.querySelectorAll('.sz-reviews-dot');

  function goToSlide(index) {
    cards[currentIndex].classList.remove('sz-active');
    dots[currentIndex].classList.remove('sz-active');

    currentIndex = index;
    if (currentIndex >= cards.length) currentIndex = 0;
    if (currentIndex < 0) currentIndex = cards.length - 1;

    cards[currentIndex].classList.add('sz-active');
    dots[currentIndex].classList.add('sz-active');

    resetAutoplay();
  }

  function nextSlide() {
    goToSlide(currentIndex + 1);
  }

  function prevSlide() {
    goToSlide(currentIndex - 1);
  }

  function resetAutoplay() {
    clearInterval(autoplayInterval);
    autoplayInterval = setInterval(nextSlide, 6000);
  }

  // Button listeners
  if (nextBtn) nextBtn.addEventListener('click', nextSlide);
  if (prevBtn) prevBtn.addEventListener('click', prevSlide);

  // Start autoplay
  resetAutoplay();

  // Pause on hover
  var slider = document.getElementById('szReviewsSlider');
  if (slider) {
    slider.addEventListener('mouseenter', function() {
      clearInterval(autoplayInterval);
    });
    slider.addEventListener('mouseleave', resetAutoplay);
  }
})();
</script>
