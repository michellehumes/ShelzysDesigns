{%- comment -%}
  Shelzy's Designs - Unified Announcement Bar

  Clean, single announcement bar with value stack:
  - Free Shipping $75+
  - 3-5 Day Turnaround
  - Permanent Sublimation Printing

  Desktop: Shows all 3 side-by-side
  Mobile: Rotates through each message

  Add ONCE at top of theme.liquid body: {% render 'shelzys-announcement-unified' %}
{%- endcomment -%}

<div class="sz-announcement" id="szAnnouncement">
  <div class="sz-announcement-inner">
    <div class="sz-announcement-messages">

      <div class="sz-announcement-item sz-active" data-index="0">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/>
        </svg>
        <span><strong>Free Shipping</strong> on Orders $75+</span>
      </div>

      <div class="sz-announcement-item" data-index="1">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
        </svg>
        <span><strong>3-5 Day</strong> Turnaround</span>
      </div>

      <div class="sz-announcement-item" data-index="2">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        </svg>
        <span><strong>Permanent</strong> Sublimation Printing</span>
      </div>

    </div>
  </div>
</div>

<style>
  .sz-announcement {
    background: linear-gradient(90deg, #3D4D3E 0%, #4E5F4A 50%, #3D4D3E 100%);
    color: #FFFFFF;
    padding: 10px 16px;
    position: relative;
    z-index: 100;
  }

  .sz-announcement-inner {
    max-width: 1400px;
    margin: 0 auto;
  }

  .sz-announcement-messages {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 40px;
    min-height: 24px;
  }

  .sz-announcement-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: "Inter", -apple-system, sans-serif;
    font-size: 13px;
    font-weight: 400;
    letter-spacing: 0.02em;
    white-space: nowrap;
  }

  .sz-announcement-item svg {
    flex-shrink: 0;
    opacity: 0.85;
  }

  .sz-announcement-item strong {
    font-weight: 600;
  }

  /* Mobile: Stack and rotate */
  @media (max-width: 899px) {
    .sz-announcement-messages {
      position: relative;
      justify-content: center;
    }

    .sz-announcement-item {
      position: absolute;
      opacity: 0;
      visibility: hidden;
      transform: translateY(6px);
      transition: all 0.4s ease;
    }

    .sz-announcement-item.sz-active {
      position: relative;
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
  }

  /* Desktop: Show all */
  @media (min-width: 900px) {
    .sz-announcement-item {
      opacity: 1 !important;
      visibility: visible !important;
      position: relative !important;
      transform: none !important;
    }

    .sz-announcement-messages {
      justify-content: space-between;
    }
  }

  /* Separator dots on desktop */
  @media (min-width: 900px) {
    .sz-announcement-item:not(:last-child)::after {
      content: "";
      display: block;
      width: 4px;
      height: 4px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      margin-left: 40px;
    }
  }
</style>

<script>
(function() {
  // Only rotate on mobile
  if (window.innerWidth >= 900) return;

  var items = document.querySelectorAll('.sz-announcement-item');
  if (items.length <= 1) return;

  var currentIndex = 0;

  setInterval(function() {
    items[currentIndex].classList.remove('sz-active');
    currentIndex = (currentIndex + 1) % items.length;
    items[currentIndex].classList.add('sz-active');
  }, 4000);

  // Handle resize
  var resizeTimer;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
      if (window.innerWidth >= 900) {
        items.forEach(function(item) {
          item.classList.add('sz-active');
        });
      }
    }, 250);
  });
})();
</script>
