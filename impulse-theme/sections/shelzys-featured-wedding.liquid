{%- comment -%}
  SHELZY'S DESIGNS: Featured Wedding Section for Impulse Theme
  Location: sections/shelzys-featured-wedding.liquid
{%- endcomment -%}

{%- assign collection = collections[section.settings.collection] -%}

<section class="shelzys-featured-wedding" data-section-id="{{ section.id }}">
  <div class="featured-wedding__wrapper">
    {%- comment -%} Image Side {%- endcomment -%}
    <div class="featured-wedding__image-side">
      {%- if section.settings.image != blank -%}
        <img
          src="{{ section.settings.image | image_url: width: 1200 }}"
          srcset="{{ section.settings.image | image_url: width: 600 }} 600w,
                  {{ section.settings.image | image_url: width: 900 }} 900w,
                  {{ section.settings.image | image_url: width: 1200 }} 1200w"
          sizes="(max-width: 989px) 100vw, 50vw"
          alt="{{ section.settings.image.alt | default: 'Bridal party with personalized bottles' }}"
          class="featured-wedding__image"
          loading="lazy"
        >
      {%- else -%}
        <div class="featured-wedding__placeholder"></div>
      {%- endif -%}
    </div>

    {%- comment -%} Content Side {%- endcomment -%}
    <div class="featured-wedding__content-side">
      <div class="featured-wedding__content">
        {%- if section.settings.badge != blank -%}
          <span class="featured-wedding__badge">{{ section.settings.badge }}</span>
        {%- endif -%}

        <h2 class="featured-wedding__title h2">{{ section.settings.title }}</h2>

        {%- if section.settings.text != blank -%}
          <p class="featured-wedding__text">{{ section.settings.text }}</p>
        {%- endif -%}

        {%- if section.settings.cta_text != blank -%}
          <a href="{{ section.settings.cta_link }}" class="btn btn--primary featured-wedding__btn">
            {{ section.settings.cta_text }}
          </a>
        {%- endif -%}

        {%- if section.settings.show_featured_products and collection != blank -%}
          <div class="featured-wedding__products">
            <p class="featured-wedding__products-label">Popular picks:</p>
            <div class="featured-wedding__products-grid">
              {%- for product in collection.products limit: 4 -%}
                <a href="{{ product.url }}" class="featured-product-mini">
                  {%- if product.featured_image != blank -%}
                    <img
                      src="{{ product.featured_image | image_url: width: 200 }}"
                      alt="{{ product.title }}"
                      class="featured-product-mini__image"
                      loading="lazy"
                    >
                  {%- endif -%}
                  <span class="featured-product-mini__title">{{ product.title | truncate: 30 }}</span>
                </a>
              {%- endfor -%}
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

<style>
.shelzys-featured-wedding {
  background: linear-gradient(135deg, #F9F7F4 0%, #F5F0EB 100%);
}

.featured-wedding__wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
  min-height: 600px;
}

.featured-wedding__image-side {
  position: relative;
  overflow: hidden;
}

.featured-wedding__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.featured-wedding__placeholder {
  width: 100%;
  height: 100%;
  min-height: 400px;
  background: linear-gradient(135deg, #E8D5D0 0%, #D4C4BD 100%);
}

.featured-wedding__content-side {
  display: flex;
  align-items: center;
  padding: 60px;
}

.featured-wedding__content {
  max-width: 500px;
}

.featured-wedding__badge {
  display: inline-block;
  padding: 8px 16px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  background: var(--color-sage, #8B9D77);
  color: #fff;
  border-radius: 4px;
  margin-bottom: 20px;
}

.featured-wedding__title {
  font-size: clamp(28px, 4vw, 40px);
  font-weight: 700;
  line-height: 1.15;
  margin: 0 0 20px;
  color: #1a1a1a;
}

.featured-wedding__text {
  font-size: 17px;
  line-height: 1.6;
  color: #555;
  margin: 0 0 32px;
}

.featured-wedding__btn {
  padding: 16px 36px;
  font-size: 15px;
  font-weight: 600;
  background: var(--color-sage, #8B9D77);
  color: #fff;
  border: none;
  border-radius: 4px;
  text-decoration: none;
  display: inline-block;
  transition: background 0.3s ease, transform 0.2s ease;
}

.featured-wedding__btn:hover {
  background: var(--color-sage-dark, #7A8C68);
  transform: translateY(-2px);
}

.featured-wedding__products {
  margin-top: 40px;
  padding-top: 32px;
  border-top: 1px solid rgba(0,0,0,0.1);
}

.featured-wedding__products-label {
  font-size: 13px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #888;
  margin: 0 0 16px;
}

.featured-wedding__products-grid {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}

.featured-product-mini {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-decoration: none;
  color: inherit;
  width: calc(25% - 12px);
  min-width: 80px;
  transition: transform 0.2s ease;
}

.featured-product-mini:hover {
  transform: translateY(-4px);
}

.featured-product-mini__image {
  width: 70px;
  height: 70px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.featured-product-mini__title {
  font-size: 11px;
  text-align: center;
  color: #555;
  line-height: 1.3;
}

@media (max-width: 989px) {
  .featured-wedding__wrapper {
    grid-template-columns: 1fr;
    min-height: auto;
  }

  .featured-wedding__image-side {
    aspect-ratio: 16/9;
  }

  .featured-wedding__content-side {
    padding: 48px 24px;
  }

  .featured-wedding__content {
    max-width: none;
    text-align: center;
  }

  .featured-wedding__products-grid {
    justify-content: center;
  }
}

@media (max-width: 549px) {
  .featured-wedding__content-side {
    padding: 40px 20px;
  }

  .featured-product-mini {
    width: calc(50% - 8px);
  }
}
</style>

{% schema %}
{
  "name": "Shelzys Featured Wedding",
  "tag": "section",
  "class": "section-featured-wedding",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image",
      "info": "Recommended: 1200x800px. Bridal party photo works best."
    },
    {
      "type": "text",
      "id": "badge",
      "label": "Badge text",
      "default": "Wedding Season 2025"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "The #1 Bridal Party Gift of 2025"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Description",
      "default": "Custom bottles designed to match your wedding colors, fonts & vibe."
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button text",
      "default": "Shop Bridal Party Bottles"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Featured Products"
    },
    {
      "type": "checkbox",
      "id": "show_featured_products",
      "label": "Show featured products",
      "default": true
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection for featured products"
    }
  ],
  "presets": [
    {
      "name": "Shelzys Featured Wedding"
    }
  ]
}
{% endschema %}
