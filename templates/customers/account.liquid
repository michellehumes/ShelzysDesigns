{%- comment -%}
  Shelzy's Designs - Customer Account Template

  Customer account dashboard showing:
  - Account overview
  - Order history
  - Address management links
{%- endcomment -%}

<div class="sz-account-page">
  <div class="sz-account-container">

    {%- comment -%} Account Header {%- endcomment -%}
    <header class="sz-account-header">
      <div class="sz-account-header-content">
        <h1 class="sz-account-title">My Account</h1>
        <p class="sz-account-welcome">Welcome back, {{ customer.first_name }}!</p>
      </div>
      <a href="{{ routes.account_logout_url }}" class="sz-btn sz-btn-secondary sz-btn-sm">Log Out</a>
    </header>

    <div class="sz-account-layout">

      {%- comment -%} Account Sidebar {%- endcomment -%}
      <aside class="sz-account-sidebar">
        <nav class="sz-account-nav">
          <a href="{{ routes.account_url }}" class="sz-account-nav-item sz-nav-active">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            Account Overview
          </a>
          <a href="{{ routes.account_addresses_url }}" class="sz-account-nav-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            Addresses
          </a>
          <a href="{{ routes.account_logout_url }}" class="sz-account-nav-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            Log Out
          </a>
        </nav>

        <div class="sz-account-info-card">
          <h3>Account Details</h3>
          <p><strong>{{ customer.name }}</strong></p>
          <p>{{ customer.email }}</p>
          {%- if customer.default_address -%}
            <p>{{ customer.default_address.city }}, {{ customer.default_address.province_code }}</p>
          {%- endif -%}
        </div>
      </aside>

      {%- comment -%} Account Content {%- endcomment -%}
      <main class="sz-account-main">

        {%- comment -%} Order History {%- endcomment -%}
        <section class="sz-account-section">
          <h2 class="sz-section-title">Order History</h2>

          {%- if customer.orders.size > 0 -%}
            <div class="sz-orders-table-wrapper">
              <table class="sz-orders-table">
                <thead>
                  <tr>
                    <th>Order</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Total</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  {%- for order in customer.orders -%}
                    <tr>
                      <td data-label="Order">
                        <a href="{{ order.customer_url }}" class="sz-order-number">{{ order.name }}</a>
                      </td>
                      <td data-label="Date">{{ order.created_at | date: '%B %d, %Y' }}</td>
                      <td data-label="Status">
                        <span class="sz-order-status sz-status-{{ order.fulfillment_status | default: 'unfulfilled' | handleize }}">
                          {{ order.fulfillment_status_label | default: 'Processing' }}
                        </span>
                      </td>
                      <td data-label="Total">{{ order.total_price | money }}</td>
                      <td>
                        <a href="{{ order.customer_url }}" class="sz-view-order">View</a>
                      </td>
                    </tr>
                  {%- endfor -%}
                </tbody>
              </table>
            </div>

            {%- comment -%} Pagination {%- endcomment -%}
            {%- paginate customer.orders by 10 -%}
              {%- if paginate.pages > 1 -%}
                <nav class="sz-pagination">
                  {{ paginate | default_pagination }}
                </nav>
              {%- endif -%}
            {%- endpaginate -%}

          {%- else -%}
            <div class="sz-orders-empty">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--sz-primary)" stroke-width="1.5">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <path d="M16 10a4 4 0 0 1-8 0"/>
              </svg>
              <h3>No orders yet</h3>
              <p>Once you place an order, it will appear here.</p>
              <a href="/collections/all" class="sz-btn sz-btn-primary">Start Shopping</a>
            </div>
          {%- endif -%}
        </section>

      </main>

    </div>

  </div>
</div>

<style>
  /* ═══════════════════════════════════════════════════════════════════
     ACCOUNT PAGE STYLES
     ═══════════════════════════════════════════════════════════════════ */
  .sz-account-page {
    padding: var(--sz-space-xl) var(--sz-space-md);
    background: var(--sz-warm-white);
    min-height: 70vh;
  }

  .sz-account-container {
    max-width: 1100px;
    margin: 0 auto;
  }

  .sz-account-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--sz-space-md);
    margin-bottom: var(--sz-space-xl);
    padding-bottom: var(--sz-space-lg);
    border-bottom: 1px solid var(--sz-border-light);
  }

  .sz-account-title {
    font-family: var(--sz-font-heading);
    font-size: var(--sz-text-2xl);
    font-weight: 600;
    color: var(--sz-primary-dark);
    margin: 0 0 var(--sz-space-xs) 0;
  }

  .sz-account-welcome {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-base);
    color: var(--sz-gray);
    margin: 0;
  }

  .sz-btn-sm {
    padding: var(--sz-space-sm) var(--sz-space-lg);
    font-size: var(--sz-text-sm);
  }

  .sz-account-layout {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: var(--sz-space-xl);
  }

  @media (max-width: 900px) {
    .sz-account-layout {
      grid-template-columns: 1fr;
    }
  }

  /* Sidebar */
  .sz-account-sidebar {
    display: flex;
    flex-direction: column;
    gap: var(--sz-space-lg);
  }

  .sz-account-nav {
    background: var(--sz-white);
    border-radius: var(--sz-radius-md);
    padding: var(--sz-space-sm);
    box-shadow: var(--sz-shadow-sm);
  }

  .sz-account-nav-item {
    display: flex;
    align-items: center;
    gap: var(--sz-space-md);
    padding: var(--sz-space-md);
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm);
    font-weight: 500;
    color: var(--sz-charcoal);
    text-decoration: none;
    border-radius: var(--sz-radius-sm);
    transition: all var(--sz-transition-fast);
  }

  .sz-account-nav-item:hover {
    background: var(--sz-beige);
    color: var(--sz-primary);
  }

  .sz-account-nav-item.sz-nav-active {
    background: var(--sz-primary);
    color: var(--sz-white);
  }

  .sz-account-nav-item svg {
    flex-shrink: 0;
  }

  .sz-account-info-card {
    background: var(--sz-white);
    border-radius: var(--sz-radius-md);
    padding: var(--sz-space-lg);
    box-shadow: var(--sz-shadow-sm);
  }

  .sz-account-info-card h3 {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm);
    font-weight: 600;
    color: var(--sz-gray);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 var(--sz-space-md) 0;
  }

  .sz-account-info-card p {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm);
    color: var(--sz-charcoal);
    margin: 0 0 var(--sz-space-xs) 0;
    line-height: 1.5;
  }

  /* Main Content */
  .sz-account-section {
    background: var(--sz-white);
    border-radius: var(--sz-radius-md);
    padding: var(--sz-space-xl);
    box-shadow: var(--sz-shadow-sm);
  }

  .sz-section-title {
    font-family: var(--sz-font-heading);
    font-size: var(--sz-text-xl);
    font-weight: 600;
    color: var(--sz-primary-dark);
    margin: 0 0 var(--sz-space-lg) 0;
  }

  /* Orders Table */
  .sz-orders-table-wrapper {
    overflow-x: auto;
  }

  .sz-orders-table {
    width: 100%;
    border-collapse: collapse;
  }

  .sz-orders-table th,
  .sz-orders-table td {
    padding: var(--sz-space-md);
    text-align: left;
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm);
  }

  .sz-orders-table th {
    font-weight: 600;
    color: var(--sz-gray);
    text-transform: uppercase;
    letter-spacing: 0.03em;
    font-size: var(--sz-text-xs);
    border-bottom: 2px solid var(--sz-border-light);
  }

  .sz-orders-table td {
    color: var(--sz-charcoal);
    border-bottom: 1px solid var(--sz-border-light);
  }

  .sz-order-number {
    color: var(--sz-primary);
    text-decoration: none;
    font-weight: 500;
  }

  .sz-order-number:hover {
    text-decoration: underline;
  }

  .sz-order-status {
    display: inline-block;
    padding: 4px 10px;
    font-size: var(--sz-text-xs);
    font-weight: 500;
    border-radius: var(--sz-radius-full);
  }

  .sz-status-fulfilled {
    background: #DCFCE7;
    color: #166534;
  }

  .sz-status-unfulfilled,
  .sz-status-processing {
    background: #FEF3C7;
    color: #92400E;
  }

  .sz-status-cancelled {
    background: #FEE2E2;
    color: #991B1B;
  }

  .sz-view-order {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm);
    color: var(--sz-primary);
    text-decoration: none;
  }

  .sz-view-order:hover {
    text-decoration: underline;
  }

  /* Mobile Table */
  @media (max-width: 700px) {
    .sz-orders-table thead {
      display: none;
    }

    .sz-orders-table tr {
      display: block;
      padding: var(--sz-space-md) 0;
      border-bottom: 1px solid var(--sz-border-light);
    }

    .sz-orders-table td {
      display: flex;
      justify-content: space-between;
      padding: var(--sz-space-sm) 0;
      border: none;
    }

    .sz-orders-table td::before {
      content: attr(data-label);
      font-weight: 600;
      color: var(--sz-gray);
    }
  }

  /* Empty Orders */
  .sz-orders-empty {
    text-align: center;
    padding: var(--sz-space-2xl);
  }

  .sz-orders-empty svg {
    margin-bottom: var(--sz-space-md);
  }

  .sz-orders-empty h3 {
    font-family: var(--sz-font-heading);
    font-size: var(--sz-text-lg);
    font-weight: 600;
    color: var(--sz-primary-dark);
    margin: 0 0 var(--sz-space-sm) 0;
  }

  .sz-orders-empty p {
    font-family: var(--sz-font-body);
    font-size: var(--sz-text-sm);
    color: var(--sz-gray);
    margin: 0 0 var(--sz-space-lg) 0;
  }
</style>
